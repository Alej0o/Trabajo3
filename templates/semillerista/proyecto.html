{% include 'semillerista/cabecera.html' %}


<br>
{% with messages =get_flashed_messages() %}
{% if messages %}
{% for message in messages %}
<div class="alert alert-success alert-dismissible fade show" role="alert">
    <strong>Success</strong>{{ message }}
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
 </div>
{% endfor %}
{% endif %}
{% endwith %}
<div class="container">
    <div class="card mt-3 w-25 mx-auto d-block">
        <div class="card-body d-flex">
            <img src="{{url_for('static', filename='imgs/circle-plus-solid.svg')}}" width="25" class="mx-auto d-block" data-bs-toggle="modal" data-bs-target="#task-modal">
            <img src="{{url_for('static', filename='imgs/user-plus-solid.svg')}}" width="25" class="mx-auto d-block" data-bs-toggle="modal" data-bs-target="#user-modal">
        </div>
    </div>

<!-- Tasks -->
<div class="row row-col-1 row-cols-sm-1 row-cols-md-3 row-cols-lg-4 mt-3">
    {% for task in tasks %}

        <div class="col-md-3">
            <div class="card">
                <div class="card-header">
                    {{task.titulo}}
                </div>
                <div class="card-body">
                    <br>
                    {{task.descripcion}} 
                </div>
                <div class="card-footer d-flex justify-content-between">
                    {{task.fecha}}
                    <form action='/semillerista/proyecto/eliminar' method="POST">
                        <input type="hidden" value="{{task.idproy}}" name="id">
                        <button type="submit" class="btn btn-outline-danger btn-sm">Eliminar</button>
                    </form>
                </div>
            </div>
        </div>

    {% endfor %}
</div>

</div>


<!-- Task Modal -->
<div class="modal fade" id="task-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
    <div class="modal-header">
    <h1 class="modal-title fs-5" id="exampleModalLabel">Nuevo Proyecto</h1>
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body">
     <form action="/new-task" method="post" autocomplete="off" enctype="multipart/form-data">
        <label>Título</label>
        <input type="text" class="form-control mb-3" name="title" required autofocus>
        <label>Descripción</label>
        <textarea class="form-control mb-3" rows="5" name="description" required autofocus></textarea>
        <label>Tipo de Proyecto</label>
        <select class="form-control mb-3" name="tiproy" required autofocus>
            <option value="Investigacion">Investigacion</option>
            <option value="Inovacion y Desarrollo">Innovacion y Desarrollo</option>
            <option value="Emprendimiento">Emprendimiento</option>
        </select>
        <div class="custom-file">
            <input type="file" name="archivo" class="custom-file-input" required>
            <label class="custom-file-label" for="validatedCustomFile">Seleccionar archivo...</label>
        </div>
        {% for sem in semi %}
        <input value='{{ semi[0][0] }}' class="form-control mb-3" type="text" name="idsem">
        {% endfor %}
        <br>
        <br>
        <button type="submit" class="btn btn-primary w-100">Guardar</button>
     </form>
    </div>
</div>
</div>
</div>

<!-- User Modal -->
<div class="modal fade" id="user-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
    <div class="modal-header">
    <h1 class="modal-title fs-5" id="exampleModalLabel">Nuevo usuario</h1>
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body">
     <form action="/new-user" method="post">
        <div class="row">
            <div class="col-6">
                <label>Nombre</label>
                <input type="text" class="form-control mb-3" name="name">
            </div>
            <div class="col-6">
                <label>Apellidos</label>
                <input type="text" class="form-control mb-3" name="surnames">
            </div>
        </div>
        <label>Email</label>
        <input type="email" class="form-control mb-3" name="email">
        <label>Contraseña</label>
        <input type="password" class="form-control mb-3" name="password">
        <button type="submit" class="btn btn-primary w-100">Guardar</button>
     </form>
    </div>
</div>
</div>
</div>

</body>

{% include 'semillerista/pie.html' %}